<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baires Real Estate</title>
    <link rel="icon" href="../images/logochico.png" type="image/png">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-rbsA2VBKQyC2PQNQxQbGQdPpTxQLvkHcQ1iJKIiwGxPU9cU2GKCk7ub1Q9F4tq91"
    crossorigin="anonymous"
>
    <link rel="stylesheet" href="../style1.css">
    

</head>
<body class="">
    <label class="hamburger-menu">
        <input type="checkbox" class="" id="menu-toggle"/>
        
    </label>
    <aside class="sidebar">
        <nav class="sidebar-nav">
            <div><a href="../index.html">Inicio</a><span class="icons material-symbols-outlined">home</span></div>
            <div><a href="../sobre nosotros/index.html">Sobre nosotros</a><span class="icons material-symbols-outlined">diversity_3</span></div>
            <div><a href="#">Departamentos</a><span class="icons material-symbols-outlined">apartment</span></div>
            <div><a href="https://wa.link/jkkn0f" target="_blank">Contacto</a><span class="icons material-symbols-outlined">phone_enabled</span></div>
        </nav>
    </aside>
    <header><p class="mobilemenu">Menu</p>
        <a href="https://bairesrealestate.online"><img class="logo-header" src="logo.png"></a>
        <nav>
        
            <ul class="desk-ul">
                
                <li><a href="https://bairesrealestate.online">Inicio</a></li>
                <li><a href="../sobre nosotros/index.html">Sobre nosotros</a></li>
                <li><a href="#departamentos">Departamentos</a></li>
                <li><a href="../contacto/index.html" target="">Contacto</a></li>
            </ul>
        </nav>
    </header>
    <div class="search-bar-container">
        <span class="input-group-text" id="search-icon">🔍</span>
        <input type="text" id="search-bar" placeholder="Buscar por ubicación..." autocomplete="off" />
        <div class="search-results" id="search-results"></div>
    </div>
    <div class="menu-wrapper">
      
        <div class="dropdown">
            <button class="dropdown-button">Ordenar por ambientes</button>
            <div class="dropdown-content">
                <a href="#" id="sort-by-rooms-1">Monoambientes</a>
                <a href="#" id="sort-by-rooms-2">2 Ambientes</a>
                <a href="#" id="sort-by-rooms-3">3 Ambientes</a>
                <a href="#" id="sort-by-rooms-4">4 Ambientes</a>
                <a href="#" id="sort-by-rooms-5">5 Ambientes</a>
                <a href="#" id="sort-price-asc">Precio Asc</a>
                <a href="#" id="sort-price-desc">Precio Desc</a>
            </div>
        </div>
    </div>

    
    <div class="container-deptos">
       

    </div>

    
    
   
    
        <!-- Modal para imágenes -->
        <div id="imageModal" class="modal">
            <span class="close" onclick="closeModal()">&times;</span>
            <img class="modal-content" id="modalImage">
            <div id="caption"></div>
            <a class="prev" onclick="changeSlide(-1)">&#10094;</a>
            <a class="next" onclick="changeSlide(1)">&#10095;</a>
        </div>
        <div id="modal" class="modal">
            <div class="modal-content1">
                <span class="close">&times;</span>
                <iframe id="map-iframe" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
            </div>
        
    </main>
    <a href="https://wa.link/jkkn0f" target="_blank"><img class="wpp" src="whatsapp.png" alt=""></a>
    <footer>
        <div class="redes">Redes Sociales</div>
        <div class="footerline"></div>
        <picture>  <a href="https://www.facebook.com/profile.php?id=61552309236999" target="_blank">
            <img class="footer-img" src="../images/fb.png">
    </a>
    <a href="https://www.instagram.com/bairesrealestate/" target="_blank">
        
        <img class="" src="../images/ig.png">
    </a>
    <a href="https://wa.link/jkkn0f" target="_blank">
        
        <img class="" src="whatsapp.png">
    </a></picture>
      
        <p>Baires Real Estate</p>
    </footer>
    <script>document.addEventListener("DOMContentLoaded", () => {
        // Función para ordenar tarjetas por precio
        function sortCards(order) {
            const container = document.querySelector('.container-deptos');
            const cards = Array.from(container.querySelectorAll('.card'));
            const sortedCards = cards.sort((a, b) => {
                const priceA = parseInt(a.querySelector('.card-price').textContent.replace(/[^0-9]/g, ''));
                const priceB = parseInt(b.querySelector('.card-price').textContent.replace(/[^0-9]/g, ''));
                return order === 'asc' ? priceA - priceB : priceB - priceA;
            });
    
            container.querySelectorAll('.card').forEach(card => card.remove());
            sortedCards.forEach(card => container.appendChild(card));
        }
    
        document.getElementById('sort-price-asc').addEventListener('click', (e) => {
            e.preventDefault();
            sortCards('asc');
        });
    
        document.getElementById('sort-price-desc').addEventListener('click', (e) => {
            e.preventDefault();
            sortCards('desc');
        });
    
        // Función para filtrar tarjetas por cantidad de ambientes
        function filterByRooms(roomCount) {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                const cardRooms = card.getAttribute('data-ambientes');
                card.style.display = cardRooms === roomCount ? 'block' : 'none';
            });
        }
    
        // Event listeners para los filtros de ambientes
        document.getElementById('sort-by-rooms-1').addEventListener('click', (e) => {
            e.preventDefault();
            filterByRooms("1");
        });
    
        document.getElementById('sort-by-rooms-2').addEventListener('click', (e) => {
            e.preventDefault();
            filterByRooms("2");
        });
    
        document.getElementById('sort-by-rooms-3').addEventListener('click', (e) => {
            e.preventDefault();
            filterByRooms("3");
        });
    
        document.getElementById('sort-by-rooms-4').addEventListener('click', (e) => {
            e.preventDefault();
            filterByRooms("4");
        });
    
        document.getElementById('sort-by-rooms-5').addEventListener('click', (e) => {
            e.preventDefault();
            filterByRooms("5");
        });
    
        // Bloquear scroll al hacer clic en el checkbox del menú hamburguesa
        const menuToggle = document.getElementById('menu-toggle');
        if (menuToggle) {
            menuToggle.addEventListener('change', function() {
                if (this.checked) {
                    document.body.classList.add('no-scroll');
                } else {
                    document.body.classList.remove('no-scroll');
                }
            });
    
            const menuLinks = document.querySelectorAll('.sidebar-nav a');
            menuLinks.forEach(link => {
                link.addEventListener('click', () => {
                    menuToggle.checked = false;
                    document.body.classList.remove('no-scroll');
                });
            });
        }
    
        // Fetch inicial para renderizar las tarjetas
        fetch(`../data.json`)
            .then((response) => response.json())
            .then((data) => {
                const container = document.querySelector(`.container-deptos`);
    
                data.forEach((depto) => {
                    const deptoDiv = document.createElement(`div`);
                    deptoDiv.className = `card`;
                    deptoDiv.setAttribute(`data-ambientes`, depto.ambientes);
    
                    deptoDiv.innerHTML = `
                        <div class="card-content">
                            <a href="${depto.url}">
                                <div class="card-img-container">
                                    <img src="${depto.img}" alt="Imagen de ${depto.location}" class="card-img">
                                </div>
                            </a>
                            <h3 class="card-location">${depto.location}</h3>
                            <p class="card-price">${depto.price}</p>
                            
                            <p class="card-description">${depto.description}</p>
                        </div>
                    `;
                    container.appendChild(deptoDiv);
                });
            })
            .catch((error) => console.error(`Error al cargar el JSON: ${error}`));
        
        // Barra de búsqueda
        const searchBar = document.getElementById("search-bar");
        searchBar.addEventListener("input", function () {
            const searchValue = this.value.toLowerCase();
            const resultsContainer = document.getElementById("search-results");
        
            if (searchValue === "") {
                resultsContainer.innerHTML = "";
                resultsContainer.style.display = "none";
                return;
            }
    
        if (searchBar !== event.target && !searchBar.contains(event.target) && document.activeElement === searchBar) {
            searchBar.blur();  // Cierra el input
        }
            // Filtrar los resultados por ubicación que empiecen con el texto ingresado
            fetch(`departamentos.json`)
                .then((response) => response.json())
                .then((data) => {
                    const filteredResults = data.filter((depto) =>
                        depto.location.toLowerCase().startsWith(searchValue)
                    );
        
                    // Mostrar los resultados
                    if (filteredResults.length > 0) {
                        resultsContainer.innerHTML = filteredResults
                            .map(
                                (result) => `
                                    <div class="search-result" data-link='${result.mapLink}'>
                                        <strong>${result.location}</strong><br>
                                        ${result.mapLink}
                                    </div>
                                `
                            )
                            .join(``);
                        resultsContainer.style.display = `block`;
        
                        // Hacer clic en un resultado para navegar al enlace
                        resultsContainer.querySelectorAll(`.search-result`).forEach((item) => {
                            item.addEventListener(`click`, function () {
                                const link = this.getAttribute(`data-link`);
                                window.location.href = link;
                            });
                        });
                    } else {
                        resultsContainer.innerHTML = `<div>No se encontraron resultados</div>`;
                    }
                })
                .catch((error) => console.error(`Error al filtrar los datos: ${error}`));
        });
    })</script>
</body>

</script>
</html>
